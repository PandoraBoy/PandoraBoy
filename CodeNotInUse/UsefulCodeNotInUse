  //   CGPostKeyboardEvent((CGCharCode)0,(CGKeyCode)124,true);
  //   CGPostKeyboardEvent((CGCharCode)0,(CGKeyCode)124,false);

//Send and apple event to youself to quit
- (void) quit
{
  AEAddressDesc addressDesc;
  ProcessSerialNumber selfPSN = { 0, kCurrentProcess };// 1
 
  OSErr err = AECreateDesc(typeProcessSerialNumber, &selfPSN, 
			   sizeof(selfPSN), &addressDesc);

  
AppleEvent someAE;
 
 err = AECreateAppleEvent(
        kCoreEventClass,
        kAEQuitApplication,
        &addressDesc,
        kAutoGenerateReturnID,
        kAnyTransactionID,
        &someAE);

  err = AESendMessage(&someAE,// 2
                    NULL,// 3
                    kAENoReply | kAENeverInteract,// 4
                    kAEDefaultTimeout);

  err = AEDisposeDesc(&addressDesc);

}


  /*
  NSScanner *theScanner = [NSScanner scannerWithString:handshakeResponse];
  while([theScanner isAtEnd] == NO) {
    NSString *tmp;	
    NSCharacterSet *newlineSet = [NSCharacterSet characterSetWithCharactersInString:@"\n"];
    [theScanner scanUpToCharactersFromSet:newlineSet intoString:&tmp]; 
    NSLog(@"scanner output: %@", tmp);
  }
  */
